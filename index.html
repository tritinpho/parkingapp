<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="vi-VN">
    <title>BAÃÉI G∆ØÃâI XE THAÃÄNH ƒêAÃ£T</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script>
        // Ensure Vietnamese locale for date inputs
        document.addEventListener('DOMContentLoaded', function() {
            // Set the document language to Vietnamese
            document.documentElement.lang = 'vi';
            
            // Configure date inputs for Vietnamese locale
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.setAttribute('lang', 'vi-VN');
                input.setAttribute('data-locale', 'vi-VN');
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>BAÃÉI G∆ØÃâI XE THAÃÄNH ƒêAÃ£T</h1>
            <button id="addNewBtn" class="add-btn">Th√™m H·ª£p ƒê·ªìng M·ªõi</button>
        </header>

        <div class="table-controls">
            <div class="search-container">
                                    <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm theo t√™n, bi·ªÉn s·ªë, ƒë·ªãa ch·ªâ, s·ªë ƒëi·ªán tho·∫°i, lo·∫°i xe, ghi ch√∫... (h·ªó tr·ª£ ti·∫øng Vi·ªát c√≥ d·∫•u)">
                <button id="clearSearch" class="clear-btn">X√≥a</button>

            </div>
            <div class="filter-container">
                <select id="statusFilter">
                    <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                    <option value="paid">ƒê√£ thanh to√°n</option>
                    <option value="unpaid">Ch∆∞a thanh to√°n</option>
                </select>
                <select id="reminderFilter">
                    <option value="">T·∫•t c·∫£ nh·∫Øc nh·ªü</option>
                    <option value="overdue">Qu√° h·∫°n</option>
                    <option value="today">H√¥m nay</option>
                    <option value="upcoming">S·∫Øp t·ªõi</option>
                </select>
                <div class="database-controls">
                    <button id="columnVisibilityBtn" class="column-btn">Hi·ªÉn Th·ªã C·ªôt</button>
                    <button id="reportBtn" class="report-btn">B√°o C√°o T√†i Ch√≠nh</button>
                    <button id="recalculateBtn" class="db-btn">T√≠nh L·∫°i S·ªë Ti·ªÅn N·ª£</button>
                    <button id="exportDbBtn" class="db-btn">Xu·∫•t Database</button>
                    <input type="file" id="importDbFile" accept=".sqlite,.db" style="display: none;">
                    <button id="importDbBtn" class="db-btn">Nh·∫≠p Database</button>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th class="sortable" data-sort="id">ID <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="owner">Ch·ªß Xe <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="driverAddress">ƒê·ªãa Ch·ªâ <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="phoneNumber">S·ªë ƒêi·ªán Tho·∫°i <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="carModel">Lo·∫°i Xe <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="plateNumber">Bi·ªÉn S·ªë <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="parkingArea">Khu V·ª±c <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="dateIn">Ng√†y V√†o <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="dateOut">Ng√†y Ra <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="nextReminder">Ng√†y Nh·∫Øc Nh·ªü <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="price">Gi√° Thu√™ (VNƒê) <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="monthsPaid">Th√°ng ƒê√£ Tr·∫£ <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="monthsPaidDetails">Chi Ti·∫øt Thanh To√°n <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="amountOwed">S·ªë Ti·ªÅn N·ª£ (VNƒê) <span class="sort-arrow"></span></th>
                        <th class="sortable" data-sort="paid">Tr·∫°ng Th√°i <span class="sort-arrow"></span></th>

                        <th class="sortable" data-sort="notes">Ghi Ch√∫ <span class="sort-arrow"></span></th>
                        <th>Thao T√°c</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <!-- Data will be populated here -->
                </tbody>
            </table>
        </div>

        <!-- Modal for adding/editing data -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="modalTitle">Th√™m H·ª£p ƒê·ªìng M·ªõi</h2>
                <form id="rentalForm">
                    <div class="form-grid">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="owner">Ch·ªß Xe:</label>
                                <input type="text" id="owner" name="owner" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="driverAddress">ƒê·ªãa Ch·ªâ:</label>
                                <input type="text" id="driverAddress" name="driverAddress" placeholder="vd: 123 Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM">
                            </div>
                            
                            <div class="form-group">
                                <label for="phoneNumber">S·ªë ƒêi·ªán Tho·∫°i:</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="vd: 0901234567 ho·∫∑c +84901234567" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="carModel">Lo·∫°i Xe:</label>
                                <input type="text" id="carModel" name="carModel" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="plateNumber">Bi·ªÉn S·ªë Xe:</label>
                                <input type="text" id="plateNumber" name="plateNumber" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="parkingArea">Khu V·ª±c ƒê·ªó Xe:</label>
                                <select id="parkingArea" name="parkingArea" required>
                                    <option value="">Ch·ªçn khu v·ª±c</option>
                                    <option value="1">Khu v·ª±c 1</option>
                                    <option value="2">Khu v·ª±c 2</option>
                                    <option value="3">Khu v·ª±c 3</option>
                                    <option value="4">Khu v·ª±c 4</option>
                                    <option value="5">Khu v·ª±c 5</option>
                                    <option value="6">Khu v·ª±c 6</option>
                                    <option value="7">Khu v·ª±c 7</option>
                                    <option value="8">Khu v·ª±c 8</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-column">
                            <div class="form-group">
                                <label for="dateIn">Ng√†y V√†o:</label>
                                <input type="text" id="dateIn" name="dateIn" class="vietnamese-date-input" placeholder="dd/mm/yyyy" required>
                                <div class="date-picker-container" id="dateInPicker" style="display: none;">
                                    <div class="date-picker-header">
                                        <button type="button" class="date-nav-btn" data-action="prev">&lt;</button>
                                        <span class="date-picker-title"></span>
                                        <button type="button" class="date-nav-btn" data-action="next">&gt;</button>
                                    </div>
                                    <div class="date-picker-weekdays">
                                        <div>T2</div><div>T3</div><div>T4</div><div>T5</div><div>T6</div><div>T7</div><div>CN</div>
                                    </div>
                                    <div class="date-picker-days"></div>
                                    <div class="date-picker-footer">
                                        <button type="button" class="date-picker-btn" data-action="clear">X√≥a</button>
                                        <button type="button" class="date-picker-btn" data-action="today">H√¥m Nay</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="checkbox-group" style="margin-bottom: 10px;">
                                    <input type="checkbox" id="openEndedRental" name="openEndedRental">
                                    <label for="openEndedRental">üîÑ Thu√™ kh√¥ng th·ªùi h·∫°n (thanh to√°n h√†ng th√°ng)</label>
                                </div>
                                <label for="dateOut">Ng√†y Ra:</label>
                                <input type="text" id="dateOut" name="dateOut" class="vietnamese-date-input" placeholder="dd/mm/yyyy">
                                <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">
                                    ƒê·ªÉ tr·ªëng n·∫øu kh√°ch thu√™ kh√¥ng th·ªùi h·∫°n
                                </small>
                                <div class="date-picker-container" id="dateOutPicker" style="display: none;">
                                    <div class="date-picker-header">
                                        <button type="button" class="date-nav-btn" data-action="prev">&lt;</button>
                                        <span class="date-picker-title"></span>
                                        <button type="button" class="date-nav-btn" data-action="next">&gt;</button>
                                    </div>
                                    <div class="date-picker-weekdays">
                                        <div>T2</div><div>T3</div><div>T4</div><div>T5</div><div>T6</div><div>T7</div><div>CN</div>
                                    </div>
                                    <div class="date-picker-days"></div>
                                    <div class="date-picker-footer">
                                        <button type="button" class="date-picker-btn" data-action="clear">X√≥a</button>
                                        <button type="button" class="date-picker-btn" data-action="today">H√¥m Nay</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="price">Gi√° Thu√™ Th√°ng (VNƒê):</label>
                                <input type="text" id="price" name="price" placeholder="vd: 3000000" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group form-full-width">
                        <label for="notes">Ghi Ch√∫:</label>
                        <textarea id="notes" name="notes" rows="3" placeholder="Ghi ch√∫ th√™m v·ªÅ kh√°ch h√†ng (t√πy ch·ªçn)"></textarea>
                        <small style="color: #666; font-size: 12px;">Th√¥ng tin b·ªï sung v·ªÅ kh√°ch h√†ng ho·∫∑c h·ª£p ƒë·ªìng (t√πy ch·ªçn)</small>
                    </div>
                    
                    <div class="form-group form-full-width">
                        <label for="amountOwed">S·ªë Ti·ªÅn C√≤n N·ª£ (VNƒê):</label>
                        <input type="number" id="amountOwed" name="amountOwed" min="0" step="1000" value="0" required>
                        <small style="color: #666; font-size: 12px;">T·ª± ƒë·ªông t√≠nh to√°n d·ª±a tr√™n th·ªùi gian thu√™, gi√° thu√™ v√† s·ªë th√°ng ƒë√£ thanh to√°n</small>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="button" id="cancelBtn" class="cancel-btn">H·ªßy</button>
                        <button type="submit" class="submit-btn">L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Financial Report Modal -->
        <div id="reportModal" class="modal">
            <div class="modal-content report-modal-content">
                <span class="close" id="reportCloseBtn">&times;</span>
                <h2 id="reportTitle">üìä B√°o C√°o T√†i Ch√≠nh</h2>
                <div id="reportContent" class="report-content">
                    <!-- Report content will be populated here -->
                </div>
                <div class="report-buttons">
                    <button id="printReportBtn" class="print-btn">üñ®Ô∏è In B√°o C√°o</button>
                    <button id="exportReportBtn" class="export-btn">üì§ Xu·∫•t Excel</button>
                    <button id="closeReportBtn" class="close-report-btn">ƒê√≥ng</button>
                </div>
            </div>
        </div>

        <!-- Invoice Modal -->
        <div id="invoiceModal" class="modal">
            <div class="modal-content invoice-modal-content">
                <span class="close" id="invoiceCloseBtn">&times;</span>
                <div id="reprintBanner" class="reprint-banner" style="display: none;">
                    <div class="reprint-message">
                        <span class="reprint-icon">üîÅ</span>
                        <span class="reprint-text">IN L·∫†I PHI·∫æU THU</span>
                        <span class="reprint-subtitle">B·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a th√¥ng tin tr∆∞·ªõc khi in</span>
                    </div>
                </div>
                <div class="invoice-container" id="invoiceContainer">
                    <div class="invoice-header">
                        <div class="company-info">
                            <h2>B√ÉI G·ª¨I XE TH√ÄNH ƒê·∫†T</h2>
                            <p>ƒêC: 125/53A √Çu D∆∞∆°ng L√¢n, P.ChaÃÅnh H∆∞ng, TP. HCM</p>
                            <p>ƒêT: 0909396424 - 0902336989</p>
                        </div>
                        <div class="invoice-title">
                            <h1>PHI·∫æU THU G·ª¨I XE √î T√î</h1>
                            <p class="subtitle">(Ki√™m phi·∫øu thanh to√°n)</p>
                        </div>
                    </div>
                    
                    <div class="invoice-content">
                        <div class="invoice-row">
                            <span class="label">H·ªç & t√™n √îng/B√†:</span>
                            <span class="value" id="invoiceCustomerName">NG√î HO√ÄNG VI·ªÜT</span>
                        </div>
                        <div class="invoice-row">
                            <span class="label">S·ªë xe:</span>
                            <span class="value" id="invoicePlateNumber">51G-762.55</span>
                        </div>
                        <div class="invoice-row">
                            <span class="label">Hi·ªáu xe:</span>
                            <span class="value" id="invoiceCarModel">LEXUS - M√ÄU B·∫†C (5 ch·ªó)</span>
                        </div>
                        <div class="invoice-row">
                            <span class="label">ƒê·ªãa ch·ªâ</span>
                            <span class="value" id="invoiceAddress"></span>
                        </div>
                        <div class="invoice-row">
                            <span class="label">S·ªë ti·ªÅn ƒë√£ tr·∫£:</span>
                            <span class="value amount" id="invoiceAmount">3,900,000</span>
                        </div>
                        <div class="amount-text">
                            <p><em>(B·∫±ng ch·ªØ)</em> <span id="invoiceAmountText">Ba tri·ªáu, ch√≠n trƒÉm ng√†n ƒë·ªìng ch·∫µn</span></p>
                        </div>
                        <div class="invoice-row">
                            <span class="label">ƒê√£ n·ªôp t·ªõi th√°ng:</span>
                            <span class="value" id="invoicePeriod">TH√ÅNG 04+05+06/2025</span>
                        </div>
                        <div class="invoice-row">
                            <span class="label">Th·ªùi gian thanh to√°n:</span>
                            <span class="value" id="invoiceDatePeriods">T·ª™ NG√ÄY 01/04/2025 ƒê·∫æN 30/06/2025</span>
                        </div>
                    </div>

                    <div class="invoice-footer">
                        <div class="signature-section">
                            <div class="signature-row">
                                <div class="payer-section">
                                    <div class="signature-spacer"></div>
                                    <p class="signature-title"><strong>NG∆Ø·ªúI N·ªòP TI·ªÄN</strong></p>
                                    <p class="signature-note">(K√Ω v√† ghi r√µ h·ªç t√™n)</p>
                                    <div class="signature-space"></div>
                                </div>
                                <div class="receiver-section">
                                    <p class="signature-date" id="invoiceDate">Ng√†y 19 th√°ng 7 nƒÉm 2025</p>
                                    <p class="signature-title"><strong>NG∆Ø·ªúI NH·∫¨N</strong></p>
                                    <p class="signature-note">(K√Ω v√† ghi r√µ h·ªç t√™n)</p>
                                    <div class="signature-space"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="invoice-notes">
                        <p><strong>L∆∞u √Ω:</strong></p>
                        <p>‚óÜ Ki√™Ãâm tra v√¢Ã£t duÃ£ng ƒë√™Ãâ trong xe luÃÅc giao nh√¢Ã£n xe. BaÃÉi g∆∞Ãâi xe Kh√¥ng chiÃ£u traÃÅch nhi√™Ã£m cho caÃÅc v√¢Ã£t t∆∞ ∆°Ãâ tr√™n xe</p>
                        <p>‚óÜ ChuÃâ xe phaÃâi th√¥ng baÃÅo tr∆∞∆°ÃÅc cho baÃÉi xe trong tr∆∞∆°ÃÄng h∆°Ã£p coÃÅ b√™n th∆∞ÃÅ ba ƒë√™ÃÅn nh√¢Ã£n xe</p>
                        <p>‚óÜ ChuÃâ xe phaÃâi th√¥ng baÃÅo tr∆∞∆°ÃÅc cho baÃÉi xe v√™ÃÄ tiÃÄnh traÃ£ng h∆∞ hoÃâng, m√¢ÃÅt maÃÅt v√™ÃÄ b√™n ngoaÃÄi xe tr∆∞∆°ÃÅc khi giao xe</p>
                        <p>‚óÜ BaÃÉi xe seÃÉ kh√¥ng chiÃ£u traÃÅch nhi√™Ã£m n√™ÃÅu nh∆∞ÃÉng l∆∞u yÃÅ tr√™n kh√¥ng ƒë∆∞∆°Ã£c th∆∞Ã£c hi√™Ã£n ƒëuÃÅng</p>
                        <p>‚óÜ S·ªë ti·ªÅn ƒë√£ thanh to√°n s·∫Ω kh√¥ng th·ªÉ ho√†n tr·∫£</p>
                    </div>
                </div>
                

                
                <div class="invoice-controls">
                    <button id="printInvoiceBtn" class="print-btn">üñ®Ô∏è In Phi·∫øu Thu</button>
                    <button id="closeInvoiceBtn" class="close-report-btn">ƒê√≥ng</button>
                </div>
            </div>
        </div>

        <!-- Column Visibility Modal -->
        <div id="columnVisibilityModal" class="modal">
            <div class="modal-content column-visibility-content">
                <span class="close" id="columnVisibilityCloseBtn">&times;</span>
                <h2>üîß Hi·ªÉn Th·ªã/·∫®n C·ªôt</h2>
                <p>Ch·ªçn nh·ªØng c·ªôt b·∫°n mu·ªën hi·ªÉn th·ªã trong b·∫£ng:</p>
                <div class="column-checkboxes">
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-id" checked data-column="1">
                        <label for="col-id">ID</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-owner" checked data-column="2">
                        <label for="col-owner">Ch·ªß Xe</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-address" checked data-column="3">
                        <label for="col-address">ƒê·ªãa Ch·ªâ</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-phone" checked data-column="4">
                        <label for="col-phone">S·ªë ƒêi·ªán Tho·∫°i</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-carmodel" checked data-column="5">
                        <label for="col-carmodel">Lo·∫°i Xe</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-platenumber" checked data-column="6">
                        <label for="col-platenumber">Bi·ªÉn S·ªë</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-parkingarea" checked data-column="7">
                        <label for="col-parkingarea">Khu V·ª±c</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-datein" checked data-column="8">
                        <label for="col-datein">Ng√†y V√†o</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-dateout" checked data-column="9">
                        <label for="col-dateout">Ng√†y Ra</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-reminder" checked data-column="10">
                        <label for="col-reminder">Ng√†y Nh·∫Øc Nh·ªü</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-price" checked data-column="11">
                        <label for="col-price">Gi√° Thu√™ (VNƒê)</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-monthspaid" checked data-column="12">
                        <label for="col-monthspaid">Th√°ng ƒê√£ Tr·∫£</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-paymentdetails" checked data-column="13">
                        <label for="col-paymentdetails">Chi Ti·∫øt Thanh To√°n</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-amountowed" checked data-column="14">
                        <label for="col-amountowed">S·ªë Ti·ªÅn N·ª£ (VNƒê)</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-status" checked data-column="15">
                        <label for="col-status">Tr·∫°ng Th√°i</label>
                    </div>

                    <div class="checkbox-row">
                        <input type="checkbox" id="col-notes" checked data-column="16">
                        <label for="col-notes">Ghi Ch√∫</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="col-actions" checked data-column="17">
                        <label for="col-actions">Thao T√°c</label>
                    </div>
                </div>
                <div class="column-controls">
                    <button id="showAllColumns" class="control-btn">Hi·ªán T·∫•t C·∫£</button>
                    <button id="hideAllColumns" class="control-btn">·∫®n T·∫•t C·∫£</button>
                    <button id="resetToDefault" class="control-btn">M·∫∑c ƒê·ªãnh</button>
                </div>
                <div class="column-buttons">
                    <button id="applyColumnChanges" class="submit-btn">√Åp D·ª•ng</button>
                    <button id="cancelColumnChanges" class="cancel-btn">H·ªßy</button>
                </div>
            </div>
        </div>

        <!-- Payment History Modal -->
        <div id="paymentHistoryModal" class="modal">
            <div class="modal-content payment-history-content">
                <span class="close" id="paymentHistoryCloseBtn">&times;</span>
                <h2 id="paymentHistoryTitle">üìã L·ªãch S·ª≠ Thanh To√°n</h2>
                <div class="customer-info">
                    <div class="customer-grid">
                        <div class="customer-item">
                            <span class="label">Kh√°ch h√†ng:</span>
                            <span class="value" id="historyCustomerName"></span>
                        </div>
                        <div class="customer-item">
                            <span class="label">Bi·ªÉn s·ªë:</span>
                            <span class="value" id="historyPlateNumber"></span>
                        </div>
                        <div class="customer-item">
                            <span class="label">Lo·∫°i xe:</span>
                            <span class="value" id="historyCarModel"></span>
                        </div>
                        <div class="customer-item">
                            <span class="label">Gi√° thu√™/th√°ng:</span>
                            <span class="value" id="historyMonthlyRate"></span>
                        </div>
                    </div>
                </div>
                
                <div class="payment-history-section">
                    <div class="section-header">
                        <h3>C√°c L·∫ßn Thanh To√°n</h3>
                        <button id="addPaymentBtn" class="add-payment-btn">+ Th√™m Thanh To√°n</button>
                    </div>
                    <div id="paymentHistoryList" class="payment-list">
                        <!-- Payment history will be populated here -->
                    </div>
                </div>

                <div class="payment-controls">
                    <button id="printPaymentHistoryBtn" class="print-btn">üñ®Ô∏è In L·ªãch S·ª≠</button>
                    <button id="closePaymentHistoryBtn" class="close-report-btn">ƒê√≥ng</button>
                </div>
            </div>
        </div>

        <!-- Add Payment Modal -->
        <div id="addPaymentModal" class="modal">
            <div class="modal-content add-payment-content">
                <span class="close" id="addPaymentCloseBtn">&times;</span>
                <h2>üí∞ Th√™m Thanh To√°n M·ªõi</h2>
                
                <!-- Customer Info Section -->
                <div class="customer-info-section">
                    <h3>Th√¥ng Tin Kh√°ch H√†ng</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Kh√°ch h√†ng:</span>
                            <span class="value" id="addPaymentCustomerName"></span>
                        </div>
                        <div class="info-item">
                            <span class="label">Bi·ªÉn s·ªë:</span>
                            <span class="value" id="addPaymentPlateNumber"></span>
                        </div>
                        <div class="info-item">
                            <span class="label">Lo·∫°i xe:</span>
                            <span class="value" id="addPaymentCarModel"></span>
                        </div>
                        <div class="info-item">
                            <span class="label">S·ªë ti·ªÅn n·ª£ hi·ªán t·∫°i:</span>
                            <span class="value amount-owed" id="addPaymentAmountOwed"></span>
                        </div>
                    </div>
                </div>

                <!-- Payment Calculation Section -->
                <div class="payment-calculation-section">
                    <h3>T√≠nh To√°n Thanh To√°n</h3>
                    <div class="calc-row">
                        <label for="addPaymentRate">Gi√° thu√™/th√°ng (VNƒê):</label>
                                                        <input type="text" id="addPaymentRate" value="3000000">
                    </div>
                    <div class="calc-section">
                        <label class="section-label">Ch·ªçn c√°c th√°ng thanh to√°n:</label>
                        <div id="addPaymentMonthSelection" class="month-grid">
                            <!-- Month checkboxes will be populated here -->
                        </div>
                        <div class="selection-controls">
                            <button type="button" id="addPaymentSelectAll" class="control-btn">Ch·ªçn T·∫•t C·∫£</button>
                            <button type="button" id="addPaymentClearAll" class="control-btn">B·ªè Ch·ªçn T·∫•t C·∫£</button>
                            <span class="selected-count">ƒê√£ ch·ªçn: <span id="addPaymentSelectedCount">0</span> th√°ng</span>
                        </div>
                    </div>
                    <div class="calc-row">
                        <label>T·ªïng ti·ªÅn thanh to√°n:</label>
                        <span id="addPaymentCalculatedTotal" class="total-display">0 VNƒê</span>
                    </div>
                </div>

                <!-- Payment Details Section -->
                <div class="payment-details-section">
                    <h3>Chi Ti·∫øt Thanh To√°n</h3>
                    <div class="form-group">
                        <label for="addPaymentDate">Ng√†y Thanh To√°n:</label>
                        <input type="text" id="addPaymentDate" name="addPaymentDate" class="vietnamese-date-input" placeholder="dd/mm/yyyy" required>
                        <div class="date-picker-container" id="addPaymentDatePicker" style="display: none;">
                            <div class="date-picker-header">
                                <button type="button" class="date-nav-btn" data-action="prev">&lt;</button>
                                <span class="date-picker-title"></span>
                                <button type="button" class="date-nav-btn" data-action="next">&gt;</button>
                            </div>
                            <div class="date-picker-weekdays">
                                <div>T2</div><div>T3</div><div>T4</div><div>T5</div><div>T6</div><div>T7</div><div>CN</div>
                            </div>
                            <div class="date-picker-days"></div>
                            <div class="date-picker-footer">
                                <button type="button" class="date-picker-btn" data-action="clear">X√≥a</button>
                                <button type="button" class="date-picker-btn" data-action="today">H√¥m Nay</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="addPaymentMethod">Ph∆∞∆°ng Th·ª©c:</label>
                        <select id="addPaymentMethod" name="addPaymentMethod" required>
                            <option value="Ti·ªÅn m·∫∑t">Ti·ªÅn m·∫∑t</option>
                            <option value="Chuy·ªÉn kho·∫£n">Chuy·ªÉn kho·∫£n</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addPaymentNotes">Ghi Ch√∫:</label>
                        <textarea id="addPaymentNotes" name="addPaymentNotes" rows="2" 
                                  placeholder="Ghi ch√∫ th√™m v·ªÅ thanh to√°n (t√πy ch·ªçn)"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="printInvoiceAfterPayment" name="printInvoiceAfterPayment" checked>
                            <label for="printInvoiceAfterPayment">üñ®Ô∏è In phi·∫øu thu sau khi th√™m thanh to√°n</label>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="add-payment-controls">
                    <button type="button" id="cancelAddPaymentBtn" class="cancel-btn">H·ªßy</button>
                    <button type="button" id="addPaymentSubmitBtn" class="submit-btn">Th√™m Thanh To√°n</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="create_sample_data.js"></script>
</body>
</html> 